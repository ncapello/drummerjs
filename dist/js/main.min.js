!function(){angular.module("drummerJS",[])}(),function(){"use strict";angular.module("drummerJS").service("dataManager",function($http){this.getData=function(path,callback){$http.get(path).then(callback)}})}(),function(){"use strict";angular.module("drummerJS").controller("MainController",function($scope,dataManager){dataManager.getData("../components/config/samples.json",function(response){$scope.samples=response.data,$scope.kicks=$scope.samples.filter(function(e){return"kick"==e.type}),$scope.snares=$scope.samples.filter(function(e){return"snare"==e.type}),$scope.hihats=$scope.samples.filter(function(e){return"hihat"==e.type}),$scope.markers=$scope.samples.filter(function(e){return"marker"==e.type})})})}(),function(){angular.module("drummerJS").directive("drumMachine",function(){var link=function(scope,ele,attrs){var refreshInterval,kick=new Audio,snare=new Audio,hihat=new Audio,currentBeat=0,beatCols=["col1","col2","col3","col4","col5","col6","col7","col8"];scope.bpm=120,scope.startLoop=!1,scope.paued=!1,scope.samples=[],kick.src="../components/sounds/kick.mp3",snare.src="../components/sounds/snare.mp3",hihat.src="../components/sounds/hihat.mp3",scope.loopingStatus=function(){return scope.startLoop},scope.playSound=function(sound){1==sound.on&&("kick"==sound.type&&kick.play(),"snare"==sound.type&&snare.play(),"hihat"==sound.type&&hihat.play())},scope.getClass=function(ele){return ele.group},scope.startTimer=function(){clearInterval(refreshInterval),refreshInterval=setInterval(function(){for(var arrayToSend=[],x=document.getElementsByClassName("beatMarker"),i=0;i<x.length;i++)x[i].style.backgroundColor="#00FF80";document.getElementsByClassName(beatCols[currentBeat])[0].style.backgroundColor="#FF0048",arrayToSend=scope.samples.filter(function(e){return e.group==beatCols[currentBeat]});for(var i=0;i<arrayToSend.length;i++)scope.playSound(arrayToSend[i]);currentBeat++,currentBeat>=8&&(currentBeat=0)},tempoSet(scope.bpm))},scope.stopTimer=function(){currentBeat=0,clearInterval(refreshInterval)},scope.pauseTimer=function(){0==scope.paused?clearInterval(refreshInterval):scope.startTimer()},scope.clearPads=function(){for(var i=0;i<scope.samples.length;i++)scope.samples[i].on=!1};var tempoSet=function(bpm){return 6e4/(2*bpm)}},directiveDefinitionObject={templateUrl:"../templates/drum-machine.html",controller:"MainController",controllerAs:"mainCtrl",link:link};return directiveDefinitionObject})}(),function(){angular.module("drummerJS").directive("drumHeader",function(){return{templateUrl:"../templates/drum-header.html",controller:"MainController",controllerAs:"mainCtrl"}})}();